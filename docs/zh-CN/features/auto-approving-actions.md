# 自动批准操作

> ⚠️ **安全警告：** 自动批准设置会绕过确认提示，使 Kilo Code 可以直接访问你的系统。这可能导致**数据丢失、文件损坏或其他更严重的后果**。命令行访问尤其危险，因为它可能执行有害操作，损害你的系统或危及安全性。仅对你完全信任的操作启用自动批准。

自动批准设置通过消除重复的确认提示来加快你的工作流程，但会显著增加安全风险。

## 快速入门指南

1. 点击聊天输入框上方的“自动批准工具栏”
2. 选择 Kilo Code 可以无需许可执行的操作
3. 使用主开关（最左侧的复选框）快速启用/禁用所有权限

## 自动批准工具栏

<img src="/docs/img/auto-approving-actions/auto-approving-actions.png" alt="自动批准工具栏折叠状态" width="600" />

*提示框和自动批准工具栏，显示已启用的权限*

点击工具栏以展开并配置各个权限：

<img src="/docs/img/auto-approving-actions/auto-approving-actions-1.png" alt="自动批准工具栏展开状态" width="600" />

*提示文本框和展开的工具栏，显示所有选项*

### 可用权限

| 权限 | 功能 | 风险等级 |
|------------|--------------|------------|
| **读取文件和目录** | 允许 Kilo Code 无需询问即可访问文件 | 中 |
| **编辑文件** | 允许 Kilo Code 无需询问即可修改文件 | **高** |
| **执行已批准的命令** | 自动运行白名单中的终端命令 | **高** |
| **使用浏览器** | 允许无头浏览器交互 | 中 |
| **使用 MCP 服务器** | 允许 Kilo Code 使用配置的 MCP 服务 | 中高 |
| **切换模式** | 自动在 Kilo Code 模式之间切换 | 低 |
| **创建和完成任务** | 无需确认即可管理子任务 | 低 |
| **重试失败的请求** | 自动重试失败的 API 请求 | 低 |

## 主开关快速控制

最左侧的复选框作为主开关：

<img src="/docs/img/auto-approving-actions/auto-approving-actions-14.png" alt="自动批准工具栏中的主开关" width="600" />

*主开关（复选框）可一次性控制所有自动批准权限*

在以下情况下使用主开关：
- 处理敏感代码时（关闭）
- 进行快速开发时（开启）
- 在探索和编辑任务之间切换时

## 高级设置面板

设置面板提供了详细的控制和重要的安全上下文：

> **允许 Kilo Code 自动执行操作而无需批准。仅在你完全信任 AI 并了解相关安全风险时启用这些设置。**

要访问这些设置：

1. 点击右上角的 <Codicon name="gear" />
2. 导航到“自动批准设置”

<img src="/docs/img/auto-approving-actions/auto-approving-actions-4.png" alt="设置面板中的自动批准选项" width="550" />

*完整设置面板视图*

### 读取操作

:::caution 读取操作
<img src="/docs/img/auto-approving-actions/auto-approving-actions-6.png" alt="只读操作设置" width="550" />

**设置：**“始终批准只读操作”

**描述：**“启用后，Kilo Code 将自动查看目录内容并读取文件，而无需你点击批准按钮。”

**风险等级：**中

虽然此设置仅允许读取文件（不允许修改），但它可能会暴露敏感数据。对于大多数用户来说，仍建议作为起点，但要注意 Kilo Code 可以访问哪些文件。
:::

### 写入操作

:::caution 写入操作
<img src="/docs/img/auto-approving-actions/auto-approving-actions-7.png" alt="写入操作设置，带有延迟滑块" width="550" />

**设置：**“始终批准写入操作”

**描述：**“自动创建和编辑文件而无需批准”

**延迟滑块：**“写入后的延迟时间，以便诊断工具检测潜在问题”（默认：1000ms）

**风险等级：**高

此设置允许 Kilo Code 无需确认即可修改你的文件。延迟计时器至关重要：
- 较高的值（2000ms+）：适用于诊断时间较长的复杂项目
- 默认值（1000ms）：适用于大多数项目
- 较低的值：仅在速度至关重要且处于受控环境中时使用
- 零：无诊断延迟（不建议用于关键代码）

#### 写入延迟与问题面板集成

<img src="/docs/img/auto-approving-actions/auto-approving-actions-5.png" alt="VSCode 问题面板显示诊断信息" width="600" />

*VSCode 问题面板，Kilo Code 在写入延迟期间检查该面板*

当你启用写文件的自动批准时，延迟计时器会与 VSCode 的问题面板配合使用：

1. Kilo Code 更改你的文件
2. VSCode 的诊断工具分析更改
3. 问题面板更新，显示任何错误或警告
4. Kilo Code 在继续之前注意到这些问题

这类似于开发人员在更改代码后暂停检查错误。你可以根据以下因素调整延迟时间：

- 项目复杂性
- 语言服务器速度
- 错误检测对你工作流程的重要性
:::

### 浏览器操作

:::info 浏览器操作
<img src="/docs/img/auto-approving-actions/auto-approving-actions-8.png" alt="浏览器操作设置" width="550" />

**设置：**“始终批准浏览器操作”

**描述：**“自动执行浏览器操作而无需批准”

**注意：**“仅当模型支持计算机使用时适用”

**风险等级：**中

允许 Kilo Code 无需确认即可控制无头浏览器。这包括：
- 打开网站
- 导航页面
- 与网页元素交互

考虑允许自动浏览器访问的安全影响。
:::

### API 请求

:::info API 请求
<img src="/docs/img/auto-approving-actions/auto-approving-actions-9.png" alt="API 请求重试设置，带有延迟滑块" width="550" />

**设置：**“始终重试失败的 API 请求”

**描述：**“当服务器返回错误响应时，自动重试失败的 API 请求”

**延迟滑块：**“重试请求前的延迟时间”（默认：5s）

**风险等级：**低

此设置在 API 调用失败时自动重试。延迟控制 Kilo Code 在重试前的等待时间：
- 较长的延迟对 API 速率限制更友好
- 较短的延迟可以更快地从临时错误中恢复
:::

### MCP 工具

:::caution MCP 工具
<img src="/docs/img/auto-approving-actions/auto-approving-actions-10.png" alt="MCP 工具设置" width="550" />

**设置：**“始终批准 MCP 工具”

**描述：**“在 MCP 服务器视图中启用各个 MCP 工具的自动批准（需同时启用此设置和工具的‘始终允许’复选框）”

**风险等级：**中高（取决于配置的 MCP 工具）

此设置与 MCP 服务器视图中的各个工具权限配合使用。必须同时启用此全局设置和工具特定权限才能实现自动批准。
:::

### 模式切换

:::info 模式切换
<img src="/docs/img/auto-approving-actions/auto-approving-actions-11.png" alt="模式切换设置" width="550" />

**设置：**“始终批准模式切换”

**描述：**“自动在不同模式之间切换而无需批准”

**风险等级：**低

允许 Kilo Code 无需许可即可在不同模式（代码、架构师等）之间切换。这主要影响 AI 的行为，而不是系统访问。
:::

### 子任务

:::info 子任务
<img src="/docs/img/auto-approving-actions/auto-approving-actions-12.png" alt="子任务设置" width="550" />

**设置：**“始终批准子任务的创建和完成”

**描述：**“允许创建和完成子任务而无需批准”

**风险等级：**低

允许 Kilo Code 自动创建和完成子任务。这涉及工作流程组织而非系统访问。
:::

### 命令执行

:::caution 命令执行
<img src="/docs/img/auto-approving-actions/auto-approving-actions-13.png" alt="命令执行设置，带有白名单界面" width="550" />

**设置：**“始终批准允许的执行操作”

**描述：**“自动执行允许的终端命令而无需批准”

**命令管理：**“当启用‘始终批准执行操作’时，可以自动执行的命令前缀。添加 * 以允许所有命令（请谨慎使用）。”

**风险等级：**高

此设置允许终端命令执行并带有控制。虽然风险较高，但白名单功能限制了可以运行的命令。重要的安全功能：

- 白名单特定的命令前缀（推荐）
- 切勿在生产环境或处理敏感数据时使用 * 通配符
- 考虑每个允许命令的安全影响
- 始终验证与外部系统交互的命令

**界面元素：**
- 输入命令前缀的文本字段（例如 'git'）
- 添加新前缀的“添加”按钮
- 带 X 的可点击命令按钮以删除它们
:::